<navbar 
  isHome="{{false}}" 
  pageTitle="我的" 
  transparent="{{false}}" 
  lightText="{{false}}" 
  showHomeSearch="{{true}}"
  homeTitle="我的"
  homeLogoUrl="/images/icon/logo.png"
  homeTitleColor="#333333"
  bind:search="goSearch">
</navbar>

<view class="mine-page">
  <view class="profile-card" bindtap="handleProfileTap">
    <image class="profile-avatar" src="{{isLoggedIn ? userInfo.avatar : defaultAvatar}}" mode="aspectFill"></image>
    <view class="profile-main">
      <text class="profile-name">{{isLoggedIn ? userInfo.name : '登录 / 注册'}}</text>
      <text class="profile-meta">{{isLoggedIn ? '手机号 ' + userInfo.phone : '登录后解锁更多服务'}}</text>
      <text class="profile-meta" wx:if="{{isLoggedIn}}">会员等级 {{userInfo.level}}</text>
      <view class="profile-action" wx:if="{{!isLoggedIn}}">立即登录</view>
    </view>
  </view>

  <view class="section-card">
    <view class="section-header">
      <text class="section-title">订单中心</text>
      <text class="section-more">全部 ></text>
    </view>
    <view class="icon-grid">
      <view class="icon-item" wx:for="{{orderItems}}" wx:key="name" bindtap="handleNeedLogin">
        <view class="icon-circle {{item.className}}">
          <image class="icon-image" src="{{item.icon}}" mode="aspectFit"></image>
        </view>
        <text>{{item.name}}</text>
      </view>
    </view>
  </view>

  <view class="section-card">
    <view class="section-title">基础服务</view>
    <view class="icon-grid">
      <view class="icon-item" wx:for="{{baseServices}}" wx:key="name" data-url="{{item.url}}" bindtap="handleServiceTap">
        <view class="icon-circle {{item.className}}">
          <image class="icon-image" src="{{item.icon}}" mode="aspectFit"></image>
        </view>
        <text>{{item.name}}</text>
      </view>
    </view>
  </view>

  <view class="section-card">
    <view class="section-title">装修服务</view>
    <view class="tag-grid">
      <view class="tag-item" wx:for="{{decorServices}}" wx:key="name" bindtap="handleNeedLogin">
        {{item.name}}
      </view>
    </view>
  </view>
</view>